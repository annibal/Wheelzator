function wheelzator(t,e,n){function i(t){}function o(t,e){return"undefined"==typeof t?e:t}function a(t,e,n,i){void 0==i&&(i=n+1);for(var o=0;t>n;)if(t-=i,o++,o>1e4)throw"Infinite loop at Wrap Within: MIN="+e+", MAX="+n+", STEP="+i+".";for(o=0;e>t;)if(t+=i,o++,o>1e4)throw"Infinite loop at Wrap Within: MIN="+e+", MAX="+n+", STEP="+i+".";return t}function s(t){return a(t,0,359)}function r(t){return 180*t/Math.PI}function l(t){return t*Math.PI/180}function h(t,e,n,i){return Math.sqrt((t-n)*(t-n)+(e-i)*(e-i))}function c(t,e,n,i){return r(Math.atan2(-(e-i),n-t))+180}if(i("_originObject"),i(t),i("_openOptions"),i(e),i("_config"),i(n),"undefined"==typeof t||0==jQuery(t).length)return void console.error("Origin Object not found: "+t);if(0==e.length)return void console.error("No options to open wheel",e);"undefined"==typeof n&&(n={}),"string"==typeof t&&(t=$(t)),$(t).html("");for(var f={minDistance:parseInt(o(n.minDistance,"20")),maxDistance:parseInt(o(n.maxDistance,"90")),optionDistance:parseInt(o(n.optionDistance,"60")),offsetAngle:parseInt(o(n.offsetAngle,"90")),offsetCalcAngle:parseInt(o(n.offsetCalcAngle,"-15")),onOpen:o(n.onOpen,function(){console.log("Wheelzator Opened")}),onClose:o(n.onClose,function(){console.log("Wheelzator Closed")}),onSelect:o(n.onSelect,function(t){console.log("Wheelzator -- selected option "+t.index+" with value "+t.value)}),onDeselect:o(n.onDeselect,function(){console.log("Deselected")})},p=[],d=0;d<e.length;d++){var u=e[d];p.push({icon:o(u.icon,"star"),value:o(u.value,d),title:o(u.title,"Option "+d)})}i("config"),i(f),i("openOptions"),i(p);var g=$("<div></div>");g.addClass("wheel-container");var v=$("<div></div>");v.addClass("wheel-inner"),v.css({width:2*f.maxDistance+"px",height:2*f.maxDistance+"px",top:-f.maxDistance+"px",left:-f.maxDistance+"px","box-sizing":"border-box",padding:f.maxDistance-1+"px"}),v.appendTo(g);var C=$("<div></div>");C.addClass("wheel-center"),C.appendTo(g);var w=$("<i></i>");w.addClass("fa"),w.appendTo(C);var m=360/p.length;i("angleBetweenOptions"),i(m);for(var d=0;d<p.length;d++){var O=p[d],x=$("<div></div>");x.addClass("wheel-option-container");var D=$("<a></a>");D.attr("title",O.title),D.attr("data-icon",O.icon),D.addClass("wheel-option"),D.addClass("icon-"+O.icon),D.addClass("option-index-"+(d+1)),D.attr("data-val",O.value);var I=$("<i></i>");I.addClass("fa"),I.addClass("fa-"+O.icon),I.appendTo(D),D.appendTo(x),x.appendTo(v);var b=f.optionDistance,A={x:Math.round(Math.sin(l(m*(d+1)+f.offsetAngle))*b),y:Math.round(Math.cos(l(m*(d+1)+f.offsetAngle))*b)};A.x+=f.maxDistance,A.y+=f.maxDistance,i([d,m,b,A.x,A.y]),p[d].htmlObj=x,x.css({top:A.x,left:A.y})}var M={};return M.config=f,M.openOptions=p,M.position=g.offset(),M.nOptions=p.length,M.originObject=t,M.wheelContainer=g,M.setValue=function(t){for(var e=0;e<this.nOptions;e++)if(this.openOptions[e].value==t)return this.setIndex(e+1),this;console.log("wheelzator setValue() value: ",t),console.error("No option found with this value")},M.setIndex=function(t){if(1>t||t>this.nOptions)return void console.error("Index beyond wheelzator options (requested setIndex("+t+"), maximum "+this.nOptions+". Obs.: starts in 1 not 0.");var e=this.openOptions[t-1].htmlObj.find("a").attr("data-icon"),n=this.wheelContainer.find(".wheel-center .fa");return n.attr("class","fa"),n.addClass("fa-"+e),this.wheelContainer.attr("data-selected",t),this.wheelContainer.attr("data-icon",e),this},M.deselect=function(){return this.wheelContainer.find(".wheel-center .fa").attr("class","fa"),$(this.wheelContainer).removeClass("in"),$(this.wheelContainer).attr("data-selected",""),$(this.wheelContainer).attr("data-icon",""),this},M.getValue=function(){return $(this.wheelContainer.attr("data-value"))},M.getIndex=function(){return $(this.wheelContainer.attr("data-selected"))},g.on("mousedown",function(t){this.wheelContainer.is(".in")||(this.wheelContainer.addClass("in"),this.wheelContainer.attr("data-clickstart",(new Date).getTime()),this.config.onOpen(),M.position=g.offset())}.bind(M)),$(document).on("mousemove",function(t){if(this.wheelContainer.is(".in")){var e=c(this.position.left+25,this.position.top+25,t.pageX,t.pageY),n=h(this.position.left+25,this.position.top+25,t.pageX,t.pageY);if(n>2*this.config.maxDistance)return this.deselect(),this.config.onDeselect(),void this.config.onClose();if(n<this.config.minDistance+20||n>this.config.maxDistance+20)return this.wheelContainer.find(".wheel-center .fa").attr("class","fa"),$(this.wheelContainer).attr("data-selected",""),void $(this.wheelContainer).attr("data-icon","");e=s(e+this.config.offsetAngle+this.config.offsetCalcAngle);var o=Math.round(e/(360/this.nOptions-1));o=a(o,1,this.nOptions-1),i([this.position.left,this.position.top,t.pageX,t.pageY]),this.setIndex(o)}}.bind(M)),$(document).on("mouseup",function(t){if(this.wheelContainer.is(".in")&&!((new Date).getTime()-parseInt(this.wheelContainer.attr("data-clickstart"))<400)){$(this.wheelContainer).removeClass("in");var e=c(this.position.left+25,this.position.top+25,t.pageX,t.pageY),n=h(this.position.left+25,this.position.top+25,t.pageX,t.pageY);if(n<this.config.minDistance+20||n>this.config.maxDistance+20)return this.deselect(),this.config.onDeselect(),void this.config.onClose();e=s(e+this.config.offsetAngle+this.config.offsetCalcAngle);var o=Math.round(e/(360/this.nOptions-1));return o=a(o,1,this.nOptions-1),i([this.position.left,this.position.top,t.pageX,t.pageY]),i([e,this.config.offsetAngle,e+this.config.offsetAngle,this.nOptions,360/this.nOptions,Math.round((e+this.config.offsetAngle)/(360/this.nOptions))]),i(this.openOptions),this.setIndex(o),this.config.onSelect({index:o,value:this.openOptions[o-1].htmlObj.find("a").attr("data-val"),target:this.openOptions[o-1].htmlObj,wheelContainer:this.wheelContainer,originObject:this.originObject}),this.config.onClose(),t.stopImmediatePropagation(),t.preventDefault(),!1}}.bind(M)),g.appendTo(t),M}